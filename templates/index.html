<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Личный бюджет</title>
  <style>
    body {font-family: Arial; margin: 40px; background: #f4f4f4;}
    table {width: 100%; border-collapse: collapse; margin: 20px 0;}
    th, td {border: 1px solid #ccc; padding: 8px; text-align: left;}
    th {background: #eee;}
    input, select, button {padding: 8px; margin: 5px;}
    .container {max-width: 1200px; margin: auto; background: white; padding: 20px; border-radius: 8px;}
  </style>
</head>
<body>
<div class="container">
  <h1>Мой бюджет</h1>

  <h2>Добавить счёт</h2>
  <form action="/add_account" method="post">
    <input name="name" placeholder="Название счёта" required>
    <button type="submit">Создать счёт</button>
  </form>

  <h2>Новая операция</h2>
  <form action="/add_transaction" method="post">
    <select name="account" required><option value="">Счёт</option>{{ACCOUNT_OPTIONS}}</select>
    <select name="category" required><option value="">Категория</option>{{CATEGORY_OPTIONS}}</select>
    <input name="amount" type="number" step="0.01" placeholder="Сумма" required>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
    const categorySelect = document.querySelector("select[name='category']");
    const typeDisplay = document.createElement("span");
    typeDisplay.style.marginLeft = "10px";
    typeDisplay.style.fontWeight = "bold";
    typeDisplay.id = "type-display";
    categorySelect.parentNode.appendChild(typeDisplay);

    function updateType() {
        const selected = categorySelect.options[categorySelect.selectedIndex].text;
        const incomeCategories = ["Зарплата", "Прочие доходы"];
        if (incomeCategories.includes(selected)) {
            typeDisplay.textContent = "(Доход)";
            typeDisplay.style.color = "green";
        } else {
            typeDisplay.textContent = "(Расход)";
            typeDisplay.style.color = "red";
        }
    }

    categorySelect.addEventListener("change", updateType);
    updateType(); // при загрузке
});



</script>
    
    <button type="submit">Добавить</button>
  </form>

  <h2>Мои счета</h2>
  <table><tr><th>Счёт</th><th>Баланс</th></tr>{{ACCOUNT_LIST}}</table>

  <h2>Расходы за текущий месяц</h2>
  <table><tr><th>Категория</th><th>Сумма</th></tr>{{MONTHLY_EXPENSES}}</table>

  <h2>Все операции</h2>
  <table>
    <tr><th>Дата</th><th>Счёт</th><th>Категория</th><th>Сумма</th><th>Тип</th></tr>
    {{TRANSACTIONS}}
  </table>
</div>
</body>
</html>

<h2>Фильтры</h2>
<form method="get" style="margin-bottom: 20px;">
    <select name="account">
        <option value="">Все счета</option>
        {{ACCOUNT_OPTIONS}}
    </select>
    
    <select name="category">
        <option value="">Все категории</option>
        {{CATEGORY_OPTIONS}}
    </select>
    
    <button type="submit">Применить</button>
    <a href="/" style="margin-left: 10px;">Сбросить</a>
</form>
